import{_ as o,r as e,o as l,c,a as n,b as s,d as t,e as p}from"./app-520BETNP.js";const u={},i=p('<h2 id="_1-接口说明" tabindex="-1"><a class="header-anchor" href="#_1-接口说明" aria-hidden="true">#</a> 1. 接口说明</h2><blockquote><p>接口地址为 <strong>https://openspeech.bytedance.com/api/v1/tts</strong></p></blockquote><h2 id="_2-身份认证" tabindex="-1"><a class="header-anchor" href="#_2-身份认证" aria-hidden="true">#</a> 2. 身份认证</h2><p>认证方式采用 Bearer Token.</p><p>需要在请求的 Header 中填入&quot;Authorization&quot;:&quot;Bearer;${token}&quot;</p><p>注意</p><p>Bearer和token使用分号 ; 分隔，替换时请勿保留${}</p>',7),r={href:"https://www.volcengine.com/docs/6561/196768#q1%EF%BC%9A%E5%93%AA%E9%87%8C%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E5%88%B0%E4%BB%A5%E4%B8%8B%E5%8F%82%E6%95%B0appid%EF%BC%8Ccluster%EF%BC%8Ctoken%EF%BC%8Cauthorization-type%EF%BC%8Csecret-key-%EF%BC%9F",target:"_blank",rel:"noopener noreferrer"},d=n("h2",{id:"_3-请求方式",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3-请求方式","aria-hidden":"true"},"#"),s(" 3. 请求方式")],-1),k=n("h3",{id:"_3-1-请求参数",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3-1-请求参数","aria-hidden":"true"},"#"),s(" 3.1 请求参数")],-1),v=n("thead",null,[n("tr",null,[n("th",null,"字段"),n("th",null,"含义"),n("th",null,"层级"),n("th",null,"格式"),n("th",null,"必需"),n("th",null,"备注")])],-1),m=n("tr",null,[n("td",null,"app"),n("td",null,"应用相关配置"),n("td",null,"1"),n("td",null,"dict"),n("td",null,"✓"),n("td")],-1),q=n("tr",null,[n("td",null,"appid"),n("td",null,"应用标识"),n("td",null,"2"),n("td",null,"string"),n("td",null,"✓"),n("td",null,"需要申请")],-1),b=n("tr",null,[n("td",null,"token"),n("td",null,"应用令牌"),n("td",null,"2"),n("td",null,"string"),n("td",null,"✓"),n("td",null,"不可为空，传入值可以通过服务端日志追溯")],-1),_=n("tr",null,[n("td",null,"cluster"),n("td",null,"业务集群"),n("td",null,"2"),n("td",null,"string"),n("td",null,"✓"),n("td",null,[s("volcano_tts，"),n("strong",null,"复刻需要根据使用的集群替换")])],-1),h=n("tr",null,[n("td",null,"user"),n("td",null,"用户相关配置"),n("td",null,"1"),n("td",null,"dict"),n("td",null,"✓"),n("td")],-1),g=n("tr",null,[n("td",null,"uid"),n("td",null,"用户标识"),n("td",null,"2"),n("td",null,"string"),n("td",null,"✓"),n("td",null,"不可为空，传入值可以通过服务端日志追溯")],-1),y=n("tr",null,[n("td",null,"audio"),n("td",null,"音频相关配置"),n("td",null,"1"),n("td",null,"dict"),n("td",null,"✓"),n("td")],-1),w=n("td",null,"voice_type",-1),f=n("td",null,"音色类型",-1),B=n("td",null,"2",-1),x=n("td",null,"string",-1),S=n("td",null,"✓",-1),j={href:"https://www.volcengine.com/docs/6561/79824",target:"_blank",rel:"noopener noreferrer"},E=n("strong",null,"复刻音色使用声音ID(speaker id)",-1),T=n("tr",null,[n("td",null,"rate"),n("td",null,"音频采样率"),n("td",null,"2"),n("td",null,"int"),n("td"),n("td",null,"默认为 24000")],-1),O=n("tr",null,[n("td",null,"encoding"),n("td",null,"音频编码格式"),n("td",null,"2"),n("td",null,"string"),n("td"),n("td",null,"wav / pcm / ogg_opus / mp3，默认为 pcm 注意：wav 不支持流式")],-1),C=n("tr",null,[n("td",null,"compression_rate"),n("td",null,"opus格式时编码压缩比"),n("td",null,"2"),n("td",null,"int"),n("td"),n("td",null,"[1, 20]，默认为 1")],-1),F=n("tr",null,[n("td",null,"speed_ratio"),n("td",null,"语速"),n("td",null,"2"),n("td",null,"float"),n("td"),n("td",null,"[0.2,3]，默认为1，通常保留一位小数即可")],-1),N=n("tr",null,[n("td",null,"volume_ratio"),n("td",null,"音量"),n("td",null,"2"),n("td",null,"float"),n("td"),n("td",null,"0.1, 3]，默认为1，通常保留一位小数即可")],-1),A=n("tr",null,[n("td",null,"pitch_ratio"),n("td",null,"音高"),n("td",null,"2"),n("td",null,"float"),n("td"),n("td",null,"[0.1, 3]，默认为1，通常保留一位小数即可")],-1),I=n("td",null,"emotion",-1),J=n("td",null,"情感/风格",-1),R=n("td",null,"2",-1),D=n("td",null,"string",-1),H=n("td",null,null,-1),U={href:"https://www.volcengine.com/docs/6561/79824",target:"_blank",rel:"noopener noreferrer"},P=n("td",null,"language",-1),V=n("td",null,"语言类型",-1),z=n("td",null,"2",-1),L=n("td",null,"string",-1),G=n("td",null,null,-1),K={href:"https://www.volcengine.com/docs/6561/79824",target:"_blank",rel:"noopener noreferrer"},Q=n("tr",null,[n("td",null,"request"),n("td",null,"请求相关配置"),n("td",null,"1"),n("td",null,"dict"),n("td",null,"✓"),n("td")],-1),Z=n("tr",null,[n("td",null,"reqid"),n("td",null,"请求标识"),n("td",null,"2"),n("td",null,"string"),n("td",null,"✓"),n("td",null,"需要保证每次调用传入值唯一，建议使用 UUID")],-1),$=n("tr",null,[n("td",null,"text"),n("td",null,"文本"),n("td",null,"2"),n("td",null,"string"),n("td",null,"✓"),n("td",null,[s("合成语音的文本，长度限制 1024 字节（UTF-8编码）。"),n("strong",null,"复刻音色没有此限制，但是HTTP接口有60s超时限制"),s(" 大约就是333 个字")])],-1),M=n("tr",null,[n("td",null,"text_type"),n("td",null,"文本类型"),n("td",null,"2"),n("td",null,"string"),n("td"),n("td",null,"plain / ssml, 默认为plain")],-1),W=n("tr",null,[n("td",null,"silence_duration"),n("td",null,"句尾静音时长"),n("td",null,"2"),n("td",null,"int"),n("td"),n("td",null,"单位为ms，默认为125")],-1),X=n("tr",null,[n("td",null,"operation"),n("td",null,"操作"),n("td",null,"2"),n("td",null,"string"),n("td",null,"✓"),n("td",null,"query（非流式，http只能query） / submit（流式）")],-1),Y=n("tr",null,[n("td",null,"with_frontend"),n("td",null,"时间戳相关"),n("td",null,"2"),n("td",null,"int string"),n("td"),n("td",null,"当with_frontend为1且frontend_type为unitTson的时候，返回音素级时间戳")],-1),nn=n("tr",null,[n("td",null,"frontend_type"),n("td",null,"时间戳相关"),n("td",null,"2"),n("td",null,"int string"),n("td"),n("td",null,"当with_frontend为1且frontend_type为unitTson的时候，返回音素级时间戳")],-1),sn=n("tr",null,[n("td",null,"with_timestamp"),n("td",null,"时间戳相关"),n("td",null,"2"),n("td",null,"int string"),n("td"),n("td",null,"新版时间戳参数，可用来替换with_frontend和frontend_type，可返回原文本的时间戳，而非TN后文本，即保留原文中的阿拉伯数字或者特殊符号等。注意：原文本中的多个标点连用或者空格依然会被处理，但不影响时间戳连贯性")],-1),an=n("td",null,"split_sentence",-1),tn=n("td",null,"复刻音色语速优化",-1),pn=n("td",null,"2",-1),on=n("td",null,"int string",-1),en=n("td",null,null,-1),ln={href:"https://www.volcengine.com/docs/6561/1204182",target:"_blank",rel:"noopener noreferrer"},cn=n("tr",null,[n("td",null,"pure_english_opt"),n("td",null,"英文前端优化"),n("td",null,"2"),n("td",null,"int string"),n("td"),n("td",null,"当pure_english_opt为1的时候，中文音色读纯英文时可以正确处理文本中的阿拉伯数字")],-1),un=p(`<p><strong>示例</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;app&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;appid123&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;access_token&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;cluster&quot;</span><span class="token operator">:</span> <span class="token string">&quot;volcano_tts&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;user&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;uid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uid123&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;audio&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;voice_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BV700_streaming&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;encoding&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mp3&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;compression_rate&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token number">24000</span><span class="token punctuation">,</span>
        <span class="token property">&quot;speed_ratio&quot;</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;volume_ratio&quot;</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;pitch_ratio&quot;</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;emotion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;happy&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cn&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;reqid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uuid&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;字节跳动语音合成&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;plain&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;operation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;query&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;silence_duration&quot;</span><span class="token operator">:</span> <span class="token string">&quot;125&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;with_frontend&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;frontend_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;unitTson&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;pure_english_opt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-返回参数" tabindex="-1"><a class="header-anchor" href="#_3-2-返回参数" aria-hidden="true">#</a> 3.2 返回参数</h3><table><thead><tr><th>字段</th><th>含义</th><th>层级</th><th>格式</th><th>备注</th></tr></thead><tbody><tr><td>reqid</td><td>请求 ID</td><td>1</td><td>string</td><td>请求 ID,与传入的参数中 reqid 一致</td></tr><tr><td>code</td><td>请求状态码</td><td>1</td><td>int</td><td>错误码，参考下方说明</td></tr><tr><td>message</td><td>请求状态信息</td><td>1</td><td>string</td><td>错误信息</td></tr><tr><td>sequence</td><td>音频段序号</td><td>1</td><td>int</td><td>负数表示合成完毕</td></tr><tr><td>data</td><td>合成音频</td><td>1</td><td>string</td><td>返回的音频数据，base64 编码</td></tr><tr><td>addition</td><td>额外信息</td><td>1</td><td>string</td><td>额外信息父节点</td></tr><tr><td>duration</td><td>音频时长</td><td>2</td><td>string</td><td>返回音频的长度，单位ms</td></tr><tr><td>frontend</td><td>时间戳信息</td><td>2</td><td>string</td><td>包含字级别和音素级别的时间戳信息</td></tr></tbody></table><p>响应示例</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;reqid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;reqid&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
	<span class="token property">&quot;operation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;query&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Success&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;sequence&quot;</span><span class="token operator">:</span> <span class="token number">-1</span><span class="token punctuation">,</span>
	<span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token string">&quot;base64 encoded binary data&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;addition&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1960&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;frontend&quot;</span><span class="token operator">:</span> &quot;<span class="token punctuation">{</span>
			<span class="token property">&quot;words&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
				<span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;字&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;start_time&quot;</span><span class="token operator">:</span> <span class="token number">0.025</span><span class="token punctuation">,</span>
				<span class="token property">&quot;end_time&quot;</span><span class="token operator">:</span> <span class="token number">0.185</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			... 
			<span class="token punctuation">{</span>
				<span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;。&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;start_time&quot;</span><span class="token operator">:</span> <span class="token number">1.85</span><span class="token punctuation">,</span>
				<span class="token property">&quot;end_time&quot;</span><span class="token operator">:</span> <span class="token number">1.955</span>
			<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;phonemes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
				<span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C0z&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;start_time&quot;</span><span class="token operator">:</span> <span class="token number">0.025</span><span class="token punctuation">,</span>
				<span class="token property">&quot;end_time&quot;</span><span class="token operator">:</span> <span class="token number">0.105</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			... 
			<span class="token punctuation">{</span>
				<span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;。&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;start_time&quot;</span><span class="token operator">:</span> <span class="token number">1.85</span><span class="token punctuation">,</span>
				<span class="token property">&quot;end_time&quot;</span><span class="token operator">:</span> <span class="token number">1.955</span>
			<span class="token punctuation">}</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span>&quot;
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-注意事项" tabindex="-1"><a class="header-anchor" href="#_4-注意事项" aria-hidden="true">#</a> 4. 注意事项</h2><ul><li>使用 HTTP Post 方式进行请求，返回的结果为 JSON 格式，需要进行解析</li><li>因 json 格式无法直接携带二进制音频，音频经base64编码。使用base64解码后，即为二进制音频</li><li>每次合成时 reqid 这个参数需要重新设置，且要保证唯一性（建议使用 UUID/GUID 等生成）</li></ul><h2 id="_5-demo" tabindex="-1"><a class="header-anchor" href="#_5-demo" aria-hidden="true">#</a> 5. Demo</h2><h3 id="_5-1-python-示例" tabindex="-1"><a class="header-anchor" href="#_5-1-python-示例" aria-hidden="true">#</a> 5.1 Python 示例</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#coding=utf-8</span>

<span class="token triple-quoted-string string">&#39;&#39;&#39;
requires Python 3.6 or later
pip install requests
&#39;&#39;&#39;</span>
<span class="token keyword">import</span> base64
<span class="token keyword">import</span> json
<span class="token keyword">import</span> uuid
<span class="token keyword">import</span> requests

<span class="token comment"># 填写平台申请的appid, access_token以及cluster</span>
appid <span class="token operator">=</span> <span class="token string">&quot;6241498878&quot;</span>
access_token<span class="token operator">=</span> <span class="token string">&quot;08nu**********43GNhZs&quot;</span>
cluster <span class="token operator">=</span> <span class="token string">&quot;volcano_tts&quot;</span>

<span class="token comment"># 东北话男声</span>
voice_type <span class="token operator">=</span> <span class="token string">&quot;BV021_streaming&quot;</span>
host <span class="token operator">=</span> <span class="token string">&quot;openspeech.bytedance.com&quot;</span>
api_url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;https://</span><span class="token interpolation"><span class="token punctuation">{</span>host<span class="token punctuation">}</span></span><span class="token string">/api/v1/tts&quot;</span></span>

header <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f&quot;Bearer;</span><span class="token interpolation"><span class="token punctuation">{</span>access_token<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">}</span>

request_json <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;app&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;appid&quot;</span><span class="token punctuation">:</span> appid<span class="token punctuation">,</span>
        <span class="token string">&quot;token&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;access_token&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;cluster&quot;</span><span class="token punctuation">:</span> cluster
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;user&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;uid&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;388808087185088&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;audio&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;voice_type&quot;</span><span class="token punctuation">:</span> voice_type<span class="token punctuation">,</span>
        <span class="token string">&quot;encoding&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;mp3&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;speed_ratio&quot;</span><span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;volume_ratio&quot;</span><span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;pitch_ratio&quot;</span><span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;request&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;reqid&quot;</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span>uuid<span class="token punctuation">.</span>uuid4<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&quot;text&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;字节跳动语音合成&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;text_type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;plain&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;operation&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;query&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;with_frontend&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">&quot;frontend_type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;unitTson&quot;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>api_url<span class="token punctuation">,</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>request_json<span class="token punctuation">)</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;resp body: \\n</span><span class="token interpolation"><span class="token punctuation">{</span>resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token string">&quot;data&quot;</span> <span class="token keyword">in</span> resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            data <span class="token operator">=</span> resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">]</span>
            file_to_save <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;test_submit.mp3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wb&quot;</span><span class="token punctuation">)</span>
            file_to_save<span class="token punctuation">.</span>write<span class="token punctuation">(</span>base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        e<span class="token punctuation">.</span>with_traceback<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-java-示例" tabindex="-1"><a class="header-anchor" href="#_5-2-java-示例" aria-hidden="true">#</a> 5.2 Java 示例</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bytedance<span class="token punctuation">.</span>tts<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSON</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">okhttp3<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Base64</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TtsHttpClient</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">HOST</span> <span class="token operator">=</span> <span class="token string">&quot;openspeech.bytedance.com&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">API_URL</span> <span class="token operator">=</span> <span class="token string">&quot;https://&quot;</span> <span class="token operator">+</span> <span class="token constant">HOST</span> <span class="token operator">+</span> <span class="token string">&quot;/api/v1/tts&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">ACCESS_TOKEN</span> <span class="token operator">=</span> <span class="token string">&quot;08nuE********F43GNhZs&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">TtsRequest</span> ttsRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TtsRequest</span><span class="token punctuation">(</span><span class="token string">&quot;字节跳动人工智能实验室我要语音合成&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">post</span><span class="token punctuation">(</span><span class="token constant">API_URL</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>ttsRequest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span> <span class="token class-name">String</span> json<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">OkHttpClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RequestBody</span> body <span class="token operator">=</span> <span class="token class-name">RequestBody</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;application/json; charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bearer; &quot;</span> <span class="token operator">+</span> <span class="token constant">ACCESS_TOKEN</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Response</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">JSONObject</span> responseJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>responseJson<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> decodedBytes <span class="token operator">=</span> <span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> responseJson<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">FileOutputStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;audio.wav&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                stream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>decodedBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// TTSRequest 就是根据JSON 转化过来的</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13);function rn(dn,kn){const a=e("ExternalLinkIcon");return l(),c("div",null,[i,n("p",null,[s("AppID/Token/Cluster 等信息可参考 "),n("a",r,[s("控制台使用FAQ-Q1"),t(a)])]),d,k,n("table",null,[v,n("tbody",null,[m,q,b,_,h,g,y,n("tr",null,[w,f,B,x,S,n("td",null,[n("a",j,[s("发音人参数列表"),t(a)]),s("，"),E])]),T,O,C,F,N,A,n("tr",null,[I,J,R,D,H,n("td",null,[n("a",U,[s("发音人参数列表"),t(a)])])]),n("tr",null,[P,V,z,L,G,n("td",null,[n("a",K,[s("发音人参数列表"),t(a)])])]),Q,Z,$,M,W,X,Y,nn,sn,n("tr",null,[an,tn,pn,on,en,n("td",null,[s("仅当使用复刻音色时设为1，可优化语速过快问题。有可能会导致时间戳多次返回。详情可见："),n("a",ln,[s("声音复刻录音指导-badcase优化建议2"),t(a)])])]),cn])]),un])}const mn=o(u,[["render",rn],["__file","huoshanyinqingTTS.html.vue"]]);export{mn as default};
